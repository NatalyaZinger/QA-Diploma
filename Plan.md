# План автоматизации
## Перечень автоматизируемых сценариев
### Тестируемые базы данных:
- MySql
- PostgreSQL

### Карты, предоставленные для тестирования (файл data.json):
- 4444 4444 4444 4441, status APPROVED
- 4444 4444 4444 4442, status DECLINED

### Валидные данные для тестирования:
- Номер карты: 16 числовых символов
- Месяц: число в двухзначном формате от 01 до 12, но не ранее текущего месяца в случае, если указан текущий год
- Год: последние две цифры порядкового номера года, не ранее текущего года и не более 5ти лет от текущего года
- Владелец: буквенные символы латинского алфавита, разделенные пробелом
- CVC: 3 числовых символа

### Тестовые сценарии

**Позитивные сценарии**

*Для оплаты по карте:*

1. Оплата по карте со статусом APPROVED  
   Номер карты 4444 4444 4444 4441, остальные поля заполнены валидными значениями.  
   ОР: появляется всплывающее окно "Операция одобрена Банком", в БД создается запись со статусом APPROVED.


2. Оплата по карте со статусом DECLINED    
   Номер карты 4444 4444 4444 4442, остальные поля заполнены валидными значениями.     
   ОР: появляется всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД создается запись со статусом DECLINED.

*Для кредита по данным карты:*

3. Кредит по данным карты со статусом APPROVED   
   Номер карты 4444 4444 4444 4441, остальные поля заполнены валидными значениями.   
   ОР: появляется всплывающее окно "Операция одобрена Банком", в БД создается запись со статусом APPROVED.


4. Кредит по данным карты со статусом DECLINED  
   Номер карты 4444 4444 4444 4442, остальные поля заполнены валидными значениями.  
   ОР: появляется всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД создается запись со статусом DECLINED.


**Негативные сценарии**

*Для оплаты по карте:*
1. Оплата по несуществующей карте   
   Номер карты 4444 4444 4444 4443, остальные поля заполнены валидными значениями.    
   ОР: появляется всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД новая запись не создается.


2. Оплата по карте с невалидным номером (11 цифр)   
   Номер карты 4444 4444 4444 444, остальные поля заполнены валидными значениями.  
   ОР: под полем Номер карты появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


3. Оплата по карте с истекшим сроком действия (месяц)  
   Номер карты 4444 4444 4444 4441, указать предыдущий месяц, текущий год, остальные поля заполнены валидными значениями.   
   ОР: под полем Месяц появляется сообщение об ошибке "Неверно указан срок действия карты", в БД новая запись не создается. 


4. Оплата по карте с истекшим сроком действия (год)  
   Номер карты 4444 4444 4444 4441, указать предыдущий год, остальные поля заполнены валидными значениямию  
   ОР: под полем Год появляется сообщение об ошибке "Истёк срок действия карты", в БД новая запись не создается.


5. Оплата по данным карты, указан невалидный месяц   
   Номер карты 4444 4444 4444 4441, в поле Месяц указать значение 00, остальные поля заполнены валидными значениями.  
   ОР: под полем Месяц появляется сообщение об ошибке "Неверно указан срок действия карты", в БД новая запись не создается.


6. Оплата по данным карты, указан невалидный месяц (1 символ в поле Месяц)  
   Номер карты 4444 4444 4444 4441, в поле Месяц указать значение из одной цифры, остальные поля заполнены валидными значениями.  
   ОР: под полем Месяц появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


7. Оплата по данным карты, указан невалидный месяц (значение больше 12)  
   Номер карты 4444 4444 4444 4441, в поле Месяц указать значение больше 12, остальные поля заполнены валидными значениями.  
   ОР: под полем Месяц появляется сообщение об ошибке "Неверно указан срок действия карты", в БД новая запись не создается.


8. Оплата по данным карты, указан невалидный год (больше 5 лет от текущего)  
   Номер карты 4444 4444 4444 4441, в поле Год указать значение "последние две цифры текущего года + 6", остальные поля заполнены валидными значениями.  
   ОР: под полем Год появляется сообщение об ошибке "Неверно указан срок действия карты", в БД новая запись не создается. 


9. Оплата по данным карты, указан невалидный год    
   Номер карты 4444 4444 4444 4441, в поле Год указать значение 00, остальные поля заполнены валидными значениями.  
   ОР: под полем Год появляется сообщение об ошибке "Неверно указан срок действия карты", в БД новая запись не создается.


10. Оплата по данным карты, указан невалидный год (1 символ в поле Год)  
   Номер карты 4444 4444 4444 4441, в поле Год указать значение из одной цифры, остальные поля заполнены валидными значениями.  
   ОР: под полем Год появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


11. Оплата по данным карты, указано невалидное значение в поле Владелец (кириллица)  
   Номер карты 4444 4444 4444 4441, в поле Владелец указать символы на кириллице, остальные поля заполнены валидными значениями.  
   ОР: под полем Владелец появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


12. Оплата по данным карты, указано невалидное значение в поле Владелец (одно слово)  
   Номер карты 4444 4444 4444 4441, в поле Владелец указать одно слово из символов латинского алфавита без пробела, остальные поля заполнены валидными значениями.  
   ОР: под полем Владелец появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается. 


13. Оплата по данным карты, указано невалидное значение в поле Владелец (символы латинского алфавита + цифры)   
   Номер карты 4444 4444 4444 4441, в поле Владелец указать символы латинского алфавита + цифры, остальные поля заполнены валидными значениями.  
   ОР: под полем Владелец появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


14. Оплата по данным карты, указано невалидное значение в поле Владелец (символы латинского алфавита + спецсимволы)  
   Номер карты 4444 4444 4444 4441, в поле Владелец указать символы латинского алфавита + спецсимволы, остальные поля заполнены валидными значениями.  
   ОР: под полем Владелец появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


15. Оплата по данным карты, указано невалидное значение в поле CVC/CVV   
   Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать значение 0, остальные поля заполнены валидными значениями.  
   ОР: под полем CVC/CVV появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.


16. Оплата по данным карты, указано невалидное значение в поле CVC/CVV (2 символа)   
    Номер карты 4444 4444 4444 4441, в поле CVC/CVV указать две цифры, остальные поля заполнены валидными значениями.  
    ОР: под полем CVC/CVV появляется сообщение об ошибке "Неверный формат", в БД новая запись не создается.

*Для кредита по данным карты:*  

Проверить все сценарии аналогично сценариям оплаты по карте.


## Перечень используемых инструментов 
- Java 11 - строго типизированный объектно-ориентированный язык программирования общего назначения, удобный для написания автотестов;
- IntelliJ IDEA 2022.1.2 - интегрированная среда разработки программного обеспечения для разных языков программирования;
- Gradle - система для автоматизации сборки приложений и сбора статистики об использовании программных библиотек;
- JUnit 5 - фреймворк для языка программирования Java, предназначенный для автоматизированного тестирования;
- Docker — ПО для автоматизации развёртывания и управления приложением в средах с поддержкой контейнеризации;
- Git - система контроля версий, позволяет фиксировать изменения в коде, быстро "откатить" изменения назад, сохранять предыдущие версии;
- Selenide - фреймворк для процесса автоматизированного тестирования программного обеспечения, 
позволяющий быстро и легко создавать программный код, который формирует и отправляет HTTP-запросы;
- DBUtils - библиотека для работы с базами данных в Java-программировании, инкапсулирует работу JDBC и упрощает работу JDBC;
- REST Assured — библиотека Java для тестирования API;
- Faker - библиотека Java для генерации данных;
- Lombok - плагин для автоматической генерации кода, позволяет сократить количество кода;
- Allure - фреймворк для создания наглядных отчетов.

## Перечень и описание возможных рисков при автоматизации
- Из-за отсутствия ТЗ и документации сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой;
- Возможное изменение верстки страницы, отсутствие селекторов test_id усложняет написание и поддержку тестов;
- Трудности с подключением к тестовому стенду;
- Временные затраты на настройку Docker;
- Использование сторонних библиотек и фреймворков может увеличивать риск возникновения технических проблем;
- Неверный выбор инструментов для тестирования; 
- Возможные проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres);
- Реальная система и реальные данные будут отличаться от SUT и тестовых данных, и автоматизация тестирования может оказаться бесполезной; 
- Тесты могут не покрывать всех возможных негативных сценариев - всегда есть возможность, что пользователь поведет себя не так, как прогнозировалось.

## Интервальная оценка с учётом рисков в часах
- Настройка системы тестового окружения - 8 часов;
- Написание и отладка автотестов - 40 часов;
- Прогон тестов и заведение баг-репортов - 8 часов;
- Получение обратной связи, устранение замечаний - 20 часов;
- Подготовка отчета по итогам автоматизированного тестирования - 10 часов;
- Подготовка отчета по итогам автоматизации - 10 часов.

*Итого с учетом рисков: 120 часов*

## План сдачи работ
- Написание и правка автотестов - до 25.12.2022;
- Создание баг-репортов и отчёта по результатам прогона тестов до 31.12.2022;
- Отчёт по результатам автоматизации до 08.01.2023.

